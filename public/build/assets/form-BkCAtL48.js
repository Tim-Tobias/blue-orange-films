import{r as i,j as e,L as F,S as j}from"./app-BDehd-ey.js";import{z as l,A as I}from"./index-BpBiTkGv.js";import{B as A}from"./app-logo-icon-CUb2kMd3.js";import{C as T,a as L}from"./card-BJ-1R0ig.js";import{I as m}from"./input-KgjiaEYa.js";import{S as U,a as W,b as P,c as R,d as V}from"./select-Chm9FUjz.js";import{A as O}from"./app-layout-CwQduCdT.js";import{u as $,s as B}from"./zod-7L9Q9KMi.js";import{D as _}from"./index.es-Bo5X9_YZ.js";/* empty css            */import"./index-D-xvPzIk.js";import"./index-Dsr1zTp_.js";import"./check-DKOcMpYi.js";const q=[{title:"Dashboard",href:"/dashboard"},{title:"Web Content",href:"/dashboard/web-contents"}],z=l.object({title:l.string().optional(),section:l.string().min(1,"Section is required")}),G=["home","service","contact"];function oe({isEdit:r=!1,data:t,categories:c}){const[a,p]=i.useState((t==null?void 0:t.content)||""),[b,d]=i.useState([]),[h,S]=i.useState(),[x,g]=i.useState((t==null?void 0:t.image)||null);function C(s){p(s.target.value)}const{register:f,setValue:v,handleSubmit:N,formState:{errors:o}}=$({resolver:B(z),defaultValues:{title:(t==null?void 0:t.title)||"",section:(t==null?void 0:t.section)||""}}),w=s=>{var u;const n=(u=s.target.files)==null?void 0:u[0];n&&(S(n),g(URL.createObjectURL(n)))},E=s=>{const n=new FormData;n.append("_method","PUT"),n.append("title",s.title||""),n.append("section",s.section),n.append("content",a||""),h instanceof File&&n.append("image",h),r&&(t!=null&&t.id)?j.post(`/dashboard/web-contents/${t.id}`,n,{forceFormData:!0,onSuccess:()=>{}}):j.post("/dashboard/web-contents",n,{forceFormData:!0})};i.useEffect(()=>{t!=null&&t.content&&p(t.content)},[t]),i.useEffect(()=>{c&&d(c)},[c]);const y=b.map(s=>s.section),D=G.filter(s=>!y.includes(s));return e.jsxs(O,{breadcrumbs:q,children:[e.jsx(F,{title:`Admin Dashboard - ${r?"Edit":"Create"} Web Content`}),e.jsxs(I,{children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:[r?"Edit":"Create"," Web Content"]}),e.jsx(T,{children:e.jsx(L,{children:e.jsxs("form",{onSubmit:N(E),encType:"multipart/form-data",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Title"}),e.jsx(m,{type:"text",...f("title"),className:"form-control mt-2"}),o.title&&e.jsx("p",{className:"text-red-500",children:o.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Content"}),e.jsx(_,{value:a,onChange:C}),o.title&&e.jsx("p",{className:"text-red-500",children:o.title.message})]}),t!=null&&t.section?e.jsx(m,{type:"hidden",...f("section"),className:"form-control mt-2"}):e.jsxs("div",{children:[e.jsx("label",{children:"Section"}),e.jsxs(U,{onValueChange:s=>v("section",s),name:"section",children:[e.jsx(W,{className:"mt-2",children:e.jsx(P,{placeholder:"Select a section"})}),e.jsx(R,{children:D.map((s,n)=>e.jsx(V,{value:s,children:`${s} section`},n))})]}),o.section&&e.jsx("p",{className:"text-red-500",children:o.section.message})]}),x&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h6",{children:"Preview:"}),e.jsx("img",{src:x,alt:"Preview",className:"h-32 w-32 object-cover"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"File"}),e.jsx(m,{type:"file",onChange:w,className:"form-control mt-2",accept:"image/*"})]}),e.jsx(A,{type:"submit",children:"Submit"})]})})})]})]})}export{oe as default,z as webContentScheme};
