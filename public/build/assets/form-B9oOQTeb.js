import{j as e,L as u,S as m}from"./app-CQZ61BoK.js";import{A as j,z as l}from"./index-BKgjLX_2.js";import{B as b}from"./button-DVn2xeT-.js";import{C as f,a as w}from"./card-DIbaGwzd.js";import{I as t}from"./input-pnqkoKf5.js";import{S as N,a as g,b as S,c as k,d as c}from"./select-qKR_pDLU.js";import{A as _}from"./app-layout-Brq4PTvv.js";import{s as v}from"./zod-DeTqYMNs.js";import{u as A}from"./index.esm-BK5FmO0I.js";/* empty css            */import"./index-DbyAg2DU.js";import"./index-C9Wy1Z_c.js";import"./createLucideIcon-Dt3Zlyou.js";import"./index-B9z1W7SR.js";import"./x-Cm2QhUop.js";import"./Blueorange-Square-BHcpwURD.js";const C=[{title:"Dashboard",href:"/dashboard"},{title:"Users",href:"/dashboard/users"}],y=l.object({name:l.string().min(1,"Name is required"),email:l.string().email("Invalid email"),password:l.string().optional(),password_confirmation:l.string().optional(),role:l.enum(["admin","user"],{required_error:"Role is required"})}).refine(a=>a.password?a.password===a.password_confirmation:!0,{message:"Passwords do not match",path:["password_confirmation"]});function H({isEdit:a=!1,data:s}){const{register:n,setValue:p,handleSubmit:x,formState:{errors:r}}=A({resolver:v(y),defaultValues:{name:(s==null?void 0:s.name)??"",email:(s==null?void 0:s.email)??"",password:"",password_confirmation:"",role:(s==null?void 0:s.role)??"user"}}),h=o=>{const i=new FormData;i.append("name",o.name),i.append("email",o.email),o.password&&(i.append("password",o.password),i.append("password_confirmation",o.password_confirmation??"")),i.append("role",o.role),a&&(s!=null&&s.id)?(i.append("_method","PUT"),m.post(`/dashboard/users/${s.id}`,i,{forceFormData:!0,onSuccess:()=>{m.visit("/dashboard/users")},onError:d=>{console.error("GAGAL kirim:",d)}})):m.post("/dashboard/users",i,{forceFormData:!0,onSuccess:()=>{m.visit("/dashboard/users")},onError:d=>{console.error("GAGAL kirim:",d)}})};return e.jsxs(_,{breadcrumbs:C,children:[e.jsx(u,{title:`Admin Dashboard - ${a?"Edit":"Create"} User`}),e.jsxs(j,{children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:[a?"Edit":"Create"," User"]}),e.jsx(f,{children:e.jsx(w,{children:e.jsxs("form",{onSubmit:x(h),className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(t,{type:"text",...n("name"),className:r.name?"border-red-500":""}),r.name&&e.jsx("p",{className:"text-sm text-red-500",children:r.name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(t,{type:"email",...n("email"),className:r.email?"border-red-500":""}),r.email&&e.jsx("p",{className:"text-sm text-red-500",children:r.email.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block",children:["Password ",!a&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(t,{type:"password",...n("password"),className:r.password?"border-red-500":"",placeholder:a?"Kosongkan jika tidak ingin ganti password":""}),r.password&&e.jsx("p",{className:"text-sm text-red-500",children:r.password.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block",children:["Konfirmasi Password ",!a&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(t,{type:"password",...n("password_confirmation"),className:r.password_confirmation?"border-red-500":"",placeholder:a?"Kosongkan jika tidak ingin ganti password":""}),r.password_confirmation&&e.jsx("p",{className:"text-sm text-red-500",children:r.password_confirmation.message})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"mb-1 block",children:["Role ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(N,{defaultValue:(s==null?void 0:s.role)??"user",onValueChange:o=>p("role",o),children:[e.jsx(g,{className:"mt-2",children:e.jsx(S,{placeholder:"Select Role"})}),e.jsxs(k,{children:[e.jsx(c,{value:"admin",children:"Admin"}),e.jsx(c,{value:"user",children:"User"})]})]}),e.jsx("input",{type:"hidden",...n("role")}),r.role&&e.jsx("p",{className:"text-red-500",children:r.role.message})]}),e.jsx(b,{type:"submit",children:a?"Update":"Create"})]})})})]})]})}export{H as default};
