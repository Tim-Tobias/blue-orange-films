import{r as a,K as k,j as e,L as C,S as x}from"./app-j1ScH27T.js";import{z as l,A as y}from"./index-D-M4y9lL.js";import{B as D}from"./button-CQ8yYxP_.js";import{C as F,a as A}from"./card-DZzINTpL.js";import{I as T}from"./input-CIUOX2Xn.js";import{e as V,a as W,b as v,c as I,d as L}from"./select-JZetwoc4.js";import{T as B}from"./textarea-BxNIrmzJ.js";import{A as E}from"./app-layout-CzSwFohl.js";import{s as z}from"./zod-BFakTopq.js";import{u as _}from"./index.esm-C4VZY3i8.js";import{S as $}from"./SyncLoader-B4CVMafc.js";/* empty css            */import"./index-g7ZPHCxC.js";import"./index-BuVcSHmA.js";import"./index-D7pQGCi_.js";import"./index-lKSAcGRB.js";import"./createLucideIcon-DOmanp4f.js";import"./index-B0Ms5Iit.js";import"./index-C6Q_E1xI.js";import"./index-CaL2sQDG.js";import"./x-CO3OYAMq.js";import"./app-logo-icon-BEmNBPCW.js";const K=[{title:"Dashboard",href:"/dashboard"},{title:"Workflows",href:"/dashboard/workflows"}],P=l.object({title:l.string().optional(),desc:l.string().optional(),order:l.number().optional()});function ae({isEdit:m=!1,data:r,orders:n}){var f,u,h;const[p,c]=a.useState(!1),[b,j]=a.useState([]),{errors:t}=k().props,{register:d,setValue:S,handleSubmit:g,formState:{errors:i}}=_({resolver:z(P),defaultValues:{title:(r==null?void 0:r.title)||"",desc:(r==null?void 0:r.desc)||"",order:(r==null?void 0:r.order)||0}}),w=o=>{c(!0);const s=new FormData;s.append("title",o.title||""),s.append("desc",o.desc||""),m&&(r!=null&&r.id)?(s.append("_method","PUT"),s.append("order",String(o.order)),x.post(`/dashboard/workflows/${r.id}`,s,{forceFormData:!0,onFinish:()=>{c(!1)}})):x.post("/dashboard/workflows",s,{forceFormData:!0,onFinish:()=>{c(!1)}})};return a.useEffect(()=>{n&&Array.from({length:Number(n)},(o,s)=>j(N=>[...N,s+1]))},[]),e.jsxs(E,{breadcrumbs:K,children:[e.jsx(C,{title:`Admin Dashboard - ${m?"Edit":"Create"} Workflows`}),e.jsxs(y,{children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:[m?"Edit":"Create"," Workflows"]}),e.jsx(F,{children:e.jsx(A,{children:e.jsxs("form",{onSubmit:g(w),encType:"multipart/form-data",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Title"}),e.jsx(T,{type:"text",...d("title"),className:"form-control mt-2"}),(i.title||t)&&e.jsx("p",{className:"text-red-500",children:((f=i.title)==null?void 0:f.message)??t.title})]}),n&&e.jsxs("div",{children:[e.jsx("label",{children:"Section"}),e.jsxs(V,{defaultValue:String(r==null?void 0:r.order),onValueChange:o=>S("order",Number(o),{shouldValidate:!0}),name:"section",children:[e.jsx(W,{className:"mt-2",children:e.jsx(v,{placeholder:"Select a order"})}),e.jsx(I,{children:b.map((o,s)=>e.jsx(L,{value:String(o),children:o},s))})]}),(i.order||t)&&e.jsx("p",{className:"text-red-500",children:((u=i.order)==null?void 0:u.message)??t.order})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Description"}),e.jsx(B,{...d("desc")}),(i.desc||t)&&e.jsx("p",{className:"text-red-500",children:((h=i.desc)==null?void 0:h.message)??t.desc})]}),e.jsx(D,{disabled:p,type:"submit",children:p?e.jsx($,{size:10,color:"#59b4c7"}):"submit"})]})})})]})]})}export{P as WorkflowScheme,ae as default};
