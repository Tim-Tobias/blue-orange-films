import{r as a,K as k,j as e,L as C,S as h}from"./app-CQZ61BoK.js";import{z as n,A as D}from"./index-BKgjLX_2.js";import{B as v}from"./button-DVn2xeT-.js";import{C as y,a as F}from"./card-DIbaGwzd.js";import{I as A}from"./input-pnqkoKf5.js";import{e as V,a as W,b as E,c as I,d as L}from"./select-qKR_pDLU.js";import{A as T}from"./app-layout-Brq4PTvv.js";import{s as B}from"./zod-DeTqYMNs.js";import{u as z}from"./index.esm-BK5FmO0I.js";import{D as _}from"./index.es-BYdaMRPf.js";import{S as $}from"./SyncLoader-DdYVSnic.js";/* empty css            */import"./index-DbyAg2DU.js";import"./index-C9Wy1Z_c.js";import"./createLucideIcon-Dt3Zlyou.js";import"./index-B9z1W7SR.js";import"./x-Cm2QhUop.js";import"./Blueorange-Square-BHcpwURD.js";const K=[{title:"Dashboard",href:"/dashboard"},{title:"Workflows",href:"/dashboard/workflows"}],P=n.object({title:n.string().optional(),desc:n.string().optional(),order:n.number().optional()});function ie({isEdit:m=!1,data:r,orders:l}){var u,f;const[d,c]=a.useState(!1),[x,b]=a.useState([]),{errors:i}=k().props,{register:j,setValue:p,handleSubmit:S,watch:g,formState:{errors:o}}=z({resolver:B(P),defaultValues:{title:(r==null?void 0:r.title)||"",desc:(r==null?void 0:r.desc)||"",order:(r==null?void 0:r.order)||0}}),w=s=>{c(!0);const t=new FormData;t.append("title",s.title||""),t.append("desc",s.desc||""),m&&(r!=null&&r.id)?(t.append("_method","PUT"),t.append("order",String(s.order)),h.post(`/dashboard/workflows/${r.id}`,t,{forceFormData:!0,onFinish:()=>{c(!1)}})):h.post("/dashboard/workflows",t,{forceFormData:!0,onFinish:()=>{c(!1)}})};return a.useEffect(()=>{l&&Array.from({length:Number(l)},(s,t)=>b(N=>[...N,t+1]))},[l]),e.jsxs(T,{breadcrumbs:K,children:[e.jsx(C,{title:`Admin Dashboard - ${m?"Edit":"Create"} Workflows`}),e.jsxs(D,{children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:[m?"Edit":"Create"," Workflows"]}),e.jsx(y,{children:e.jsx(F,{children:e.jsxs("form",{onSubmit:S(w),encType:"multipart/form-data",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Title"}),e.jsx(A,{type:"text",...j("title"),className:"form-control mt-2"}),(o.title||i)&&e.jsx("p",{className:"text-red-500",children:((u=o.title)==null?void 0:u.message)??i.title})]}),l&&e.jsxs("div",{children:[e.jsx("label",{children:"Section"}),e.jsxs(V,{defaultValue:String(r==null?void 0:r.order),onValueChange:s=>p("order",Number(s),{shouldValidate:!0}),name:"section",children:[e.jsx(W,{className:"mt-2",children:e.jsx(E,{placeholder:"Select a order"})}),e.jsx(I,{children:x.map((s,t)=>e.jsx(L,{value:String(s),children:s},t))})]}),(o.order||i)&&e.jsx("p",{className:"text-red-500",children:((f=o.order)==null?void 0:f.message)??i.order})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block font-medium",children:"Content"}),e.jsx(_,{value:g("desc")||"",onChange:s=>p("desc",s.target.value)}),o.desc&&e.jsx("p",{className:"text-sm text-red-500",children:o.desc.message})]}),e.jsx(v,{disabled:d,type:"submit",children:d?e.jsx($,{size:10,color:"#59b4c7"}):"submit"})]})})})]})]})}export{P as WorkflowScheme,ie as default};
