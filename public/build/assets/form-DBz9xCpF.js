import{K as U,r as i,j as e,L as W,S}from"./app-BDehd-ey.js";import{z as a,A as P}from"./index-BpBiTkGv.js";import{B as R}from"./app-logo-icon-CUb2kMd3.js";import{C as V,a as B}from"./card-BJ-1R0ig.js";import{I as g}from"./input-KgjiaEYa.js";import{S as O,a as _,b as $,c as z,d as k}from"./select-Chm9FUjz.js";import{A as q}from"./app-layout-CwQduCdT.js";import{u as G,s as K}from"./zod-7L9Q9KMi.js";import{D as H}from"./index.es-Bo5X9_YZ.js";import{S as J}from"./SyncLoader-CUGVxTqb.js";/* empty css            */import"./index-D-xvPzIk.js";import"./index-Dsr1zTp_.js";import"./check-DKOcMpYi.js";const M=[{title:"Dashboard",href:"/dashboard"},{title:"Web Content",href:"/dashboard/web-contents"}],Q=a.object({title:a.string().optional(),section:a.string().min(1,"Section is required")}),X=["home","service","contact"];function he({isEdit:c=!1,data:s,categories:l}){var j,b;const{errors:o}=U().props,[p,h]=i.useState((s==null?void 0:s.content)||""),[f,m]=i.useState(!1),[C,v]=i.useState([]),[u,N]=i.useState(),[x,w]=i.useState((s==null?void 0:s.image_url)||null);function E(t){h(t.target.value)}const{register:F,setValue:y,handleSubmit:D,formState:{errors:r}}=G({resolver:K(Q),defaultValues:{title:(s==null?void 0:s.title)||"",section:(s==null?void 0:s.section)||""}}),I=t=>{var d;const n=(d=t.target.files)==null?void 0:d[0];n&&(N(n),w(URL.createObjectURL(n)))},A=t=>{m(!0);const n=new FormData;n.append("title",t.title||""),n.append("section",t.section),n.append("content",p||""),u instanceof File&&n.append("image",u),c&&(s!=null&&s.id)?(n.append("_method","PUT"),S.post(`/dashboard/web-contents/${s.id}`,n,{forceFormData:!0,onFinish:()=>{m(!1)}})):S.post("/dashboard/web-contents",n,{forceFormData:!0,onFinish:()=>{m(!1)}})};i.useEffect(()=>{s!=null&&s.content&&h(s.content)},[s]),i.useEffect(()=>{l&&v(l)},[l]);const L=C.map(t=>t.section),T=X.filter(t=>!L.includes(t));return e.jsxs(q,{breadcrumbs:M,children:[e.jsx(W,{title:`Admin Dashboard - ${c?"Edit":"Create"} Web Content`}),e.jsxs(P,{children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:[c?"Edit":"Create"," Web Content"]}),e.jsx(V,{children:e.jsx(B,{children:e.jsxs("form",{onSubmit:D(A),encType:"multipart/form-data",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Title"}),e.jsx(g,{type:"text",...F("title"),className:"form-control mt-2"}),(r.title||o)&&e.jsx("p",{className:"text-red-500",children:((j=r.title)==null?void 0:j.message)??o.title})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Content"}),e.jsx(H,{value:p,onChange:E})]}),!(s!=null&&s.section)&&e.jsxs("div",{children:[e.jsx("label",{children:"Section"}),e.jsxs(O,{onValueChange:t=>y("section",t),name:"section",children:[e.jsx(_,{className:"mt-2",children:e.jsx($,{placeholder:"Select a section"})}),e.jsx(z,{children:T.map((t,n)=>e.jsx(k,{value:t,children:`${t} section`},n))})]}),(r.section||o)&&e.jsx("p",{className:"text-red-500",children:((b=r.section)==null?void 0:b.message)??o.section})]}),x&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h6",{children:"Preview:"}),e.jsx("img",{src:x,alt:"Preview",className:"h-32 w-32 object-cover"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"File"}),e.jsx(g,{type:"file",onChange:I,className:"form-control mt-2",accept:"image/*"}),o&&e.jsx("p",{className:"text-red-500",children:o.image})]}),e.jsx(R,{disabled:f,type:"submit",children:f?e.jsx(J,{size:10,color:"#59b4c7"}):"submit"})]})})})]})]})}export{he as default,Q as webContentScheme};
