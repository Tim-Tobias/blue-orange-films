import{K as A,r as o,j as e,L as D,S as j}from"./app-j1ScH27T.js";import{z as m,A as L}from"./index-D-M4y9lL.js";import{B as T}from"./button-CQ8yYxP_.js";import{C as U,a as P}from"./card-DZzINTpL.js";import{I as b}from"./input-CIUOX2Xn.js";import{S as R,a as V,b as O,c as _,d as $}from"./select-JZetwoc4.js";import{A as k}from"./app-layout-CzSwFohl.js";import{s as z}from"./zod-BFakTopq.js";import{u as q}from"./index.esm-C4VZY3i8.js";import{S as G}from"./SyncLoader-B4CVMafc.js";/* empty css            */import"./index-g7ZPHCxC.js";import"./index-BuVcSHmA.js";import"./index-D7pQGCi_.js";import"./index-lKSAcGRB.js";import"./createLucideIcon-DOmanp4f.js";import"./index-B0Ms5Iit.js";import"./index-C6Q_E1xI.js";import"./index-CaL2sQDG.js";import"./x-CO3OYAMq.js";import"./app-logo-icon-BEmNBPCW.js";const K=[{title:"Dashboard",href:"/dashboard"},{title:"Banner",href:"/dashboard/banners"}],W=m.object({title:m.string().optional(),section:m.string().min(1,"Section is required")}),H=["about","works","contact"];function fe({isEdit:c=!1,data:s,categories:l}){var x,f;const{errors:i}=A().props,[p,a]=o.useState(!1),[S,g]=o.useState([]),[h,C]=o.useState(),[d,v]=o.useState((s==null?void 0:s.image_url)||null),{register:N,setValue:F,handleSubmit:y,formState:{errors:n}}=q({resolver:z(W),defaultValues:{title:(s==null?void 0:s.title)||"",section:(s==null?void 0:s.section)||""}}),I=t=>{var u;const r=(u=t.target.files)==null?void 0:u[0];r&&(C(r),v(URL.createObjectURL(r)))},w=t=>{a(!0);const r=new FormData;r.append("title",t.title||""),r.append("section",t.section),h instanceof File&&r.append("image",h),c&&(s!=null&&s.id)?(r.append("_method","PUT"),j.post(`/dashboard/banners/${s.id}`,r,{forceFormData:!0,onFinish:()=>{a(!1)}})):j.post("/dashboard/banners",r,{forceFormData:!0,onFinish:()=>{a(!1)}})};o.useEffect(()=>{l&&g(l)},[l]);const B=S.map(t=>t.section),E=H.filter(t=>!B.includes(t));return e.jsxs(k,{breadcrumbs:K,children:[e.jsx(D,{title:`Admin Dashboard - ${c?"Edit":"Create"} Banner`}),e.jsxs(L,{children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:[c?"Edit":"Create"," Banner"]}),e.jsx(U,{children:e.jsx(P,{children:e.jsxs("form",{onSubmit:y(w),encType:"multipart/form-data",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Title"}),e.jsx(b,{type:"text",...N("title"),className:"form-control mt-2"}),(n.title||i)&&e.jsx("p",{className:"text-red-500",children:((x=n.title)==null?void 0:x.message)??i.title})]}),!(s!=null&&s.section)&&e.jsxs("div",{children:[e.jsx("label",{children:"Section"}),e.jsxs(R,{onValueChange:t=>F("section",t),name:"section",children:[e.jsx(V,{className:"mt-2",children:e.jsx(O,{placeholder:"Select a section"})}),e.jsx(_,{children:E.map((t,r)=>e.jsx($,{value:t,children:`${t} section`},r))})]}),(n.section||i)&&e.jsx("p",{className:"text-red-500",children:((f=n.section)==null?void 0:f.message)??i.section})]}),d&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h6",{children:"Preview:"}),e.jsx("img",{src:d,alt:"Preview",className:"h-32 w-32 object-cover"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"File"}),e.jsx(b,{type:"file",onChange:I,className:"form-control mt-2",accept:"image/*"}),i&&e.jsx("p",{className:"text-red-500",children:i.image})]}),e.jsx(T,{disabled:p,type:"submit",children:p?e.jsx(G,{size:10,color:"#59b4c7"}):"submit"})]})})})]})]})}export{W as bannerScheme,fe as default};
