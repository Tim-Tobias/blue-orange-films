import{r as i,j as e,L as F,S as j}from"./app-CTFKshRw.js";import{z as l,u as I,A,s as T}from"./index-CGCNqGPS.js";import{B as L}from"./app-logo-icon-1hkm0niW.js";import{C as U,a as W}from"./card-LRnGcZsu.js";import{I as m}from"./input-Dqog5_97.js";import{S as P,a as R,b as V,c as O,d as $}from"./select-d72RtfL9.js";import{A as B}from"./app-layout-DlC0Q9rz.js";import{D as _}from"./index.es-BLUfSxgF.js";import"./index-5BRI2FRx.js";import"./index-BL0nbUem.js";import"./check-uHjNkaAW.js";const q=[{title:"Dashboard",href:"/dashboard"},{title:"Web Content",href:"/dashboard/web-contents"}],z=l.object({title:l.string().optional(),section:l.string().min(1,"Section is required")}),G=["home","service","contact"];function se({isEdit:r=!1,data:t,categories:c}){const[a,p]=i.useState((t==null?void 0:t.content)||""),[b,d]=i.useState([]),[h,S]=i.useState(),[x,g]=i.useState((t==null?void 0:t.image)||null);function C(s){p(s.target.value)}const{register:f,setValue:v,handleSubmit:N,formState:{errors:o}}=I({resolver:T(z),defaultValues:{title:(t==null?void 0:t.title)||"",section:(t==null?void 0:t.section)||""}}),w=s=>{var u;const n=(u=s.target.files)==null?void 0:u[0];n&&(S(n),g(URL.createObjectURL(n)))},E=s=>{const n=new FormData;n.append("_method","PUT"),n.append("title",s.title||""),n.append("section",s.section),n.append("content",a||""),h instanceof File&&n.append("image",h),r&&(t!=null&&t.id)?j.post(`/dashboard/web-contents/${t.id}`,n,{forceFormData:!0,onSuccess:()=>{}}):j.post("/dashboard/web-contents",n,{forceFormData:!0})};i.useEffect(()=>{t!=null&&t.content&&p(t.content)},[t]),i.useEffect(()=>{c&&d(c)},[c]);const y=b.map(s=>s.section),D=G.filter(s=>!y.includes(s));return e.jsxs(B,{breadcrumbs:q,children:[e.jsx(F,{title:`Admin Dashboard - ${r?"Edit":"Create"} Web Content`}),e.jsxs(A,{children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:[r?"Edit":"Create"," Web Content"]}),e.jsx(U,{children:e.jsx(W,{children:e.jsxs("form",{onSubmit:N(E),encType:"multipart/form-data",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Title"}),e.jsx(m,{type:"text",...f("title"),className:"form-control mt-2"}),o.title&&e.jsx("p",{className:"text-red-500",children:o.title.message})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Content"}),e.jsx(_,{value:a,onChange:C}),o.title&&e.jsx("p",{className:"text-red-500",children:o.title.message})]}),t!=null&&t.section?e.jsx(m,{type:"hidden",...f("section"),className:"form-control mt-2"}):e.jsxs("div",{children:[e.jsx("label",{children:"Section"}),e.jsxs(P,{onValueChange:s=>v("section",s),name:"section",children:[e.jsx(R,{className:"mt-2",children:e.jsx(V,{placeholder:"Select a section"})}),e.jsx(O,{children:D.map((s,n)=>e.jsx($,{value:s,children:`${s} section`},n))})]}),o.section&&e.jsx("p",{className:"text-red-500",children:o.section.message})]}),x&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h6",{children:"Preview:"}),e.jsx("img",{src:x,alt:"Preview",className:"h-32 w-32 object-cover"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"File"}),e.jsx(m,{type:"file",onChange:w,className:"form-control mt-2",accept:"image/*"})]}),e.jsx(L,{type:"submit",children:"Submit"})]})})})]})]})}export{se as default,z as webContentScheme};
