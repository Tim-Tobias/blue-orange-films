import{j as e,r as d,K as N,L as k,S as h}from"./app-BDehd-ey.js";import{z as n,A as y}from"./index-BpBiTkGv.js";import{a as C,B as D}from"./app-logo-icon-CUb2kMd3.js";import{C as F,a as A}from"./card-BJ-1R0ig.js";import{I as V}from"./input-KgjiaEYa.js";import{e as W,a as T,b as I,c as L,d as z}from"./select-Chm9FUjz.js";import{A as B}from"./app-layout-CwQduCdT.js";import{u as E,s as _}from"./zod-7L9Q9KMi.js";import{S as $}from"./SyncLoader-CUGVxTqb.js";/* empty css            */import"./index-D-xvPzIk.js";import"./index-Dsr1zTp_.js";import"./check-DKOcMpYi.js";function K({className:l,...r}){return e.jsx("textarea",{"data-slot":"textarea",className:C("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",l),...r})}const P=[{title:"Dashboard",href:"/dashboard"},{title:"Workflows",href:"/dashboard/workflows"}],R=n.object({title:n.string().optional(),desc:n.string().optional(),order:n.number().optional()});function se({isEdit:l=!1,data:r,orders:a}){var u,x,f;const[m,c]=d.useState(!1),[b,j]=d.useState([]),{errors:o}=N().props,{register:p,setValue:g,handleSubmit:S,formState:{errors:i}}=E({resolver:_(R),defaultValues:{title:(r==null?void 0:r.title)||"",desc:(r==null?void 0:r.desc)||"",order:(r==null?void 0:r.order)||0}}),w=t=>{c(!0);const s=new FormData;s.append("title",t.title||""),s.append("desc",t.desc||""),l&&(r!=null&&r.id)?(s.append("_method","PUT"),s.append("order",String(t.order)),h.post(`/dashboard/workflows/${r.id}`,s,{forceFormData:!0,onFinish:()=>{c(!1)}})):h.post("/dashboard/workflows",s,{forceFormData:!0,onFinish:()=>{c(!1)}})};return d.useEffect(()=>{a&&Array.from({length:Number(a)},(t,s)=>j(v=>[...v,s+1]))},[]),e.jsxs(B,{breadcrumbs:P,children:[e.jsx(k,{title:`Admin Dashboard - ${l?"Edit":"Create"} Workflows`}),e.jsxs(y,{children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:[l?"Edit":"Create"," Workflows"]}),e.jsx(F,{children:e.jsx(A,{children:e.jsxs("form",{onSubmit:S(w),encType:"multipart/form-data",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Title"}),e.jsx(V,{type:"text",...p("title"),className:"form-control mt-2"}),(i.title||o)&&e.jsx("p",{className:"text-red-500",children:((u=i.title)==null?void 0:u.message)??o.title})]}),a&&e.jsxs("div",{children:[e.jsx("label",{children:"Section"}),e.jsxs(W,{defaultValue:String(r==null?void 0:r.order),onValueChange:t=>g("order",Number(t),{shouldValidate:!0}),name:"section",children:[e.jsx(T,{className:"mt-2",children:e.jsx(I,{placeholder:"Select a order"})}),e.jsx(L,{children:b.map((t,s)=>e.jsx(z,{value:String(t),children:t},s))})]}),(i.order||o)&&e.jsx("p",{className:"text-red-500",children:((x=i.order)==null?void 0:x.message)??o.order})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Description"}),e.jsx(K,{...p("desc")}),(i.desc||o)&&e.jsx("p",{className:"text-red-500",children:((f=i.desc)==null?void 0:f.message)??o.desc})]}),e.jsx(D,{disabled:m,type:"submit",children:m?e.jsx($,{size:10,color:"#59b4c7"}):"submit"})]})})})]})]})}export{R as WorkflowScheme,se as default};
