import{j as m,L as _,S as l}from"./app-CQZ61BoK.js";import{A as f,z as e}from"./index-BKgjLX_2.js";import{A as u}from"./app-layout-Brq4PTvv.js";import{s as b}from"./zod-DeTqYMNs.js";import{u as y}from"./index.esm-BK5FmO0I.js";import{B as S}from"./button-DVn2xeT-.js";import c from"./form_files-BukQqA7K.js";import x from"./form_project-B-wckh7s.js";import F from"./form_team-BLyVABVU.js";import{c as g}from"./capital_letter-XOa2RYLO.js";/* empty css            */import"./index-C9Wy1Z_c.js";import"./createLucideIcon-Dt3Zlyou.js";import"./index-B9z1W7SR.js";import"./index-DbyAg2DU.js";import"./x-Cm2QhUop.js";import"./Blueorange-Square-BHcpwURD.js";import"./card-DIbaGwzd.js";import"./input-pnqkoKf5.js";import"./radio-group-k2964nCx.js";import"./player-BSuMWNCO.js";import"./select-qKR_pDLU.js";import"./index.es-BYdaMRPf.js";const $=[{title:"Dashboard",href:"/dashboard"},{title:"Projects",href:"/dashboard/Projects"}],k=e.object({title:e.string().min(1),year:e.string().min(4),duration:e.string(),aspect_ratio:e.string(),category:e.string(),description:e.string(),highlight:e.string().min(1),highlight_image:e.instanceof(File).optional(),client:e.string(),teams:e.array(e.object({id_name:e.number(),name:e.string(),id_role:e.number(),role:e.string()})),files:e.array(e.object({title:e.string(),category:e.enum(["video","image"]),project_link:e.union([e.string(),e.instanceof(File)]),description:e.string()}))});function Q({isEdit:r=!1,categories:d,project:i}){const o=y({resolver:b(k),defaultValues:{title:r?i==null?void 0:i.title:"",year:r?String(i==null?void 0:i.year):"",duration:r?i==null?void 0:i.duration:"",aspect_ratio:r?i==null?void 0:i.aspect_ratio:"",category:r?String(i==null?void 0:i.id_project_category):"",description:r?i==null?void 0:i.description:"",highlight:r?String(i==null?void 0:i.highlight_link):"",client:r?i==null?void 0:i.client:"",highlight_image:void 0,teams:r?((i==null?void 0:i.teams)??[]).map(a=>{var n,t;return{id_name:a.id_name_crew,name:g(((n=a.name_crew)==null?void 0:n.name)||""),id_role:a.id_crew_roles,role:g(((t=a.role)==null?void 0:t.name)||"")}})||[]:[],files:r?((i==null?void 0:i.files)??[]).map(a=>({title:a.title,category:a.category,project_link:r?String(a.project_link):"",description:a.description}))||[]:[]}}),{handleSubmit:h}=o,p=a=>{const n=new FormData;n.append("title",a.title),n.append("year",a.year),n.append("duration",a.duration),n.append("aspect_ratio",a.aspect_ratio),n.append("category",a.category),n.append("description",a.description),n.append("client",a.client),n.append("highlight",a.highlight),a.highlight_image&&n.append("highlight_image",a.highlight_image),a.teams.forEach((t,s)=>{n.append(`teams[${s}][id_name]`,String(t.id_name)),n.append(`teams[${s}][id_role]`,String(t.id_role)),n.append(`teams[${s}][name]`,String(t.name)),n.append(`teams[${s}][role]`,String(t.role))}),a.files.forEach((t,s)=>{n.append(`files[${s}][title]`,t.title),n.append(`files[${s}][category]`,t.category),n.append(`files[${s}][description]`,t.description),n.append(`files[${s}][project_link]`,t.project_link)}),r?(n.append("_method","PUT"),n.append("id",String(i==null?void 0:i.id)),l.post(`/dashboard/projects/${i==null?void 0:i.id}`,n,{forceFormData:!0})):(console.log(...n),l.post("/dashboard/projects",n,{forceFormData:!0}))};return m.jsxs(u,{breadcrumbs:$,children:[m.jsx(_,{title:`Admin Dashboard - ${r?"Edit":"Create"} Web Content`}),m.jsxs(f,{children:[m.jsxs("h1",{className:"text-2xl font-semibold",children:[r?"Edit":"Create"," Web Content"]}),m.jsxs("form",{onSubmit:h(p),className:"space-y-8",children:[m.jsx(x,{isEdit:r,project:i,categories:d,form:o}),m.jsx(F,{form:o}),m.jsx(c,{isEdit:r,form:o}),m.jsx(S,{type:"submit",children:"Submit"})]})]})]})}export{Q as default};
