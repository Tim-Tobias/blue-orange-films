import{j as e,r as d,K as N,L as k,S as h}from"./app-CTFKshRw.js";import{z as n,u as y,A as C,s as D}from"./index-CGCNqGPS.js";import{c as F,B as A}from"./app-logo-icon-1hkm0niW.js";import{C as V,a as W}from"./card-LRnGcZsu.js";import{I as T}from"./input-Dqog5_97.js";import{e as I,a as L,b as z,c as B,d as E}from"./select-d72RtfL9.js";import{A as _}from"./app-layout-DlC0Q9rz.js";import{S as $}from"./SyncLoader-CoiVCy4y.js";import"./index-5BRI2FRx.js";import"./index-BL0nbUem.js";import"./check-uHjNkaAW.js";function K({className:l,...r}){return e.jsx("textarea",{"data-slot":"textarea",className:F("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",l),...r})}const P=[{title:"Dashboard",href:"/dashboard"},{title:"Workflows",href:"/dashboard/workflows"}],R=n.object({title:n.string().optional(),desc:n.string().optional(),order:n.number().optional()});function ee({isEdit:l=!1,data:r,orders:a}){var u,x,f;const[m,c]=d.useState(!1),[b,j]=d.useState([]),{errors:o}=N().props,{register:p,setValue:g,handleSubmit:S,formState:{errors:i}}=y({resolver:D(R),defaultValues:{title:(r==null?void 0:r.title)||"",desc:(r==null?void 0:r.desc)||"",order:(r==null?void 0:r.order)||0}}),w=t=>{c(!0);const s=new FormData;s.append("title",t.title||""),s.append("desc",t.desc||""),l&&(r!=null&&r.id)?(s.append("_method","PUT"),s.append("order",String(t.order)),h.post(`/dashboard/workflows/${r.id}`,s,{forceFormData:!0,onFinish:()=>{c(!1)}})):h.post("/dashboard/workflows",s,{forceFormData:!0,onFinish:()=>{c(!1)}})};return d.useEffect(()=>{a&&Array.from({length:Number(a)},(t,s)=>j(v=>[...v,s+1]))},[]),e.jsxs(_,{breadcrumbs:P,children:[e.jsx(k,{title:`Admin Dashboard - ${l?"Edit":"Create"} Workflows`}),e.jsxs(C,{children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:[l?"Edit":"Create"," Workflows"]}),e.jsx(V,{children:e.jsx(W,{children:e.jsxs("form",{onSubmit:S(w),encType:"multipart/form-data",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Title"}),e.jsx(T,{type:"text",...p("title"),className:"form-control mt-2"}),(i.title||o)&&e.jsx("p",{className:"text-red-500",children:((u=i.title)==null?void 0:u.message)??o.title})]}),a&&e.jsxs("div",{children:[e.jsx("label",{children:"Section"}),e.jsxs(I,{defaultValue:String(r==null?void 0:r.order),onValueChange:t=>g("order",Number(t),{shouldValidate:!0}),name:"section",children:[e.jsx(L,{className:"mt-2",children:e.jsx(z,{placeholder:"Select a order"})}),e.jsx(B,{children:b.map((t,s)=>e.jsx(E,{value:String(t),children:t},s))})]}),(i.order||o)&&e.jsx("p",{className:"text-red-500",children:((x=i.order)==null?void 0:x.message)??o.order})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Description"}),e.jsx(K,{...p("desc")}),(i.desc||o)&&e.jsx("p",{className:"text-red-500",children:((f=i.desc)==null?void 0:f.message)??o.desc})]}),e.jsx(A,{disabled:m,type:"submit",children:m?e.jsx($,{size:10,color:"#59b4c7"}):"submit"})]})})})]})]})}export{R as WorkflowScheme,ee as default};
