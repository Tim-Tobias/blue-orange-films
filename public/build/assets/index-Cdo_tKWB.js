import{K as y,r as n,j as e,L as D,$ as u,S as i}from"./app-CTFKshRw.js";import{B as a}from"./app-logo-icon-1hkm0niW.js";import{C as j,a as p}from"./card-LRnGcZsu.js";import{I as v}from"./input-Dqog5_97.js";import{T as A,a as I,b as L,c as g,d as l,e as B,f as o}from"./table-CdVQH2GP.js";import{A as F}from"./app-layout-DlC0Q9rz.js";import{S as E}from"./SyncLoader-CoiVCy4y.js";import"./index-BL0nbUem.js";import"./index-5BRI2FRx.js";const w="/build/assets/Image-not-found-CrVVzeex.png",P=[{title:"Dashboard",href:"/dashboard"},{title:"Workflows",href:"/dashboard/workflows"}];function K({workflows:k,webContent:C}){const{errors:t}=y().props,[d,c]=n.useState(!1),[m,h]=n.useState(C.image_url??w),[x,f]=n.useState(null),T=s=>{i.delete(`/dashboard/workflows/${s}`)},N=s=>{var b;const r=(b=s.target.files)==null?void 0:b[0];r&&(f(r),h(URL.createObjectURL(r)))},S=s=>{s.preventDefault(),c(!0);const r=new FormData;x instanceof File&&r.append("background",x),r.append("_method","PATCH"),i.post("/dashboard/workflows/background",r,{forceFormData:!0,onFinish:()=>{c(!1),i.flushAll()}}),f(null)};return e.jsxs(F,{breadcrumbs:P,children:[e.jsx(D,{title:"Workflows"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(j,{className:"w-fit",children:e.jsxs(p,{children:[m&&e.jsx("img",{src:m,alt:"Preview",className:"mb-5 h-32 w-32 object-cover"}),e.jsxs("form",{onSubmit:s=>S(s),encType:"multipart/form-data",method:"POST",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Background"}),e.jsx(v,{onError:()=>h(w),type:"file",onChange:N,className:"form-control mt-2",accept:"image/svg+xml"}),(t==null?void 0:t.background)&&e.jsx("p",{className:"text-red-500",children:t.background})]}),e.jsx(a,{disabled:d,type:"submit",children:d?e.jsx(E,{size:10,color:"#59b4c7"}):"submit"})]})]})}),e.jsx("div",{className:"flex w-full items-center justify-end",children:e.jsx(u,{href:"/dashboard/workflows/create",children:e.jsx(a,{children:"Create"})})}),e.jsx(j,{children:e.jsx(p,{children:e.jsxs(A,{children:[e.jsx(I,{children:"A list of your web contents."}),e.jsx(L,{children:e.jsxs(g,{children:[e.jsx(l,{children:"Title"}),e.jsx(l,{children:"Desc"}),e.jsx(l,{children:"Order"}),e.jsx(l,{className:"text-right",children:"Action"})]})}),e.jsx(B,{children:k.map((s,r)=>e.jsxs(g,{children:[e.jsx(o,{className:"font-medium",children:s.title}),e.jsx(o,{children:s.desc}),e.jsx(o,{children:s.order}),e.jsxs(o,{className:"text-right",children:[e.jsx(u,{href:`/dashboard/workflows/${s.id}/edit`,children:e.jsx(a,{children:"Edit"})}),e.jsx(a,{className:"ml-3 bg-red-500 text-white hover:bg-red-600",onClick:()=>T(s.id),children:"Delete"})]})]},r))})]})})})]})]})}export{K as default};
