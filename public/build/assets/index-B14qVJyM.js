import{K as v,r as i,j as e,L as S,$ as l,S as f}from"./app-j1ScH27T.js";import{D as N}from"./DataTable-92y3capN.js";import{B as t}from"./button-CQ8yYxP_.js";import{C as x,a as b}from"./card-DZzINTpL.js";import{I as C}from"./input-CIUOX2Xn.js";import{A as D}from"./app-layout-CzSwFohl.js";import{S as L}from"./SyncLoader-B4CVMafc.js";/* empty css            */import"./createLucideIcon-DOmanp4f.js";import"./index-g7ZPHCxC.js";import"./index-D7pQGCi_.js";import"./index-B0Ms5Iit.js";import"./index-BuVcSHmA.js";import"./index-lKSAcGRB.js";import"./index-CaL2sQDG.js";import"./x-CO3OYAMq.js";import"./app-logo-icon-BEmNBPCW.js";const j="/build/assets/Image-not-found-CrVVzeex.png",y=[{title:"Dashboard",href:"/dashboard"},{title:"Workflows",href:"/dashboard/workflows"}];function q({workflows:o,webContent:g}){const{errors:a}=v().props,[c,n]=i.useState(!1),[d,m]=i.useState(g.image_url??j),[u,h]=i.useState(null),w=r=>{var p;const s=(p=r.target.files)==null?void 0:p[0];s&&(h(s),m(URL.createObjectURL(s)))},k=r=>{r.preventDefault(),n(!0);const s=new FormData;u instanceof File&&s.append("background",u),s.append("_method","PATCH"),f.post("/dashboard/workflows/background",s,{forceFormData:!0,onFinish:()=>{n(!1),f.flushAll()}}),h(null)};return e.jsxs(D,{breadcrumbs:y,children:[e.jsx(S,{title:"Workflows"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4",children:[e.jsx(x,{className:"w-fit",children:e.jsxs(b,{children:[d&&e.jsx("img",{src:d,alt:"Preview",className:"mb-5 h-32 w-32 object-cover"}),e.jsxs("form",{onSubmit:r=>k(r),encType:"multipart/form-data",method:"POST",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{children:"Background"}),e.jsx(C,{onError:()=>m(j),type:"file",onChange:w,className:"form-control mt-2",accept:"image/svg+xml"}),(a==null?void 0:a.background)&&e.jsx("p",{className:"text-red-500",children:a.background})]}),e.jsx(t,{disabled:c,type:"submit",children:c?e.jsx(L,{size:10,color:"#59b4c7"}):"submit"})]})]})}),e.jsx("div",{className:"flex w-full items-center justify-end",children:e.jsx(l,{href:"/dashboard/workflows/create",children:e.jsx(t,{children:"Create"})})}),e.jsx(x,{children:e.jsx(b,{children:e.jsx(N,{columns:[{header:"Title",accessor:"title",searchable:!0},{header:"Desc",accessor:"desc",searchable:!0},{header:"Order",accessor:"order",sortable:!0},{header:"Action",accessor:r=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{href:`/dashboard/workflows/${r.id}/edit`,children:e.jsx(t,{className:"cursor-pointer",variant:"outline",children:"Edit"})}),e.jsx(l,{href:`/dashboard/workflows/${r.id}/delete`,children:e.jsx(t,{className:"cursor-pointer",variant:"destructive",children:"Delete"})})]})}],data:o.data,currentPage:o.current_page,totalPages:o.last_page,caption:"List of Workflows"})})})]})]})}export{q as default};
