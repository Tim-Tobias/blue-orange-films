import{K as U,r as i,j as e,L as W,S}from"./app-CTFKshRw.js";import{z as a,u as P,A as R,s as V}from"./index-CGCNqGPS.js";import{B}from"./app-logo-icon-1hkm0niW.js";import{C as O,a as _}from"./card-LRnGcZsu.js";import{I as g}from"./input-Dqog5_97.js";import{S as $,a as z,b as k,c as q,d as G}from"./select-d72RtfL9.js";import{A as K}from"./app-layout-DlC0Q9rz.js";import{D as H}from"./index.es-BLUfSxgF.js";import{S as J}from"./SyncLoader-CoiVCy4y.js";import"./index-5BRI2FRx.js";import"./index-BL0nbUem.js";import"./check-uHjNkaAW.js";const M=[{title:"Dashboard",href:"/dashboard"},{title:"Web Content",href:"/dashboard/web-contents"}],Q=a.object({title:a.string().optional(),section:a.string().min(1,"Section is required")}),X=["home","service","contact"];function ae({isEdit:c=!1,data:s,categories:l}){var j,b;const{errors:o}=U().props,[p,h]=i.useState((s==null?void 0:s.content)||""),[u,m]=i.useState(!1),[C,v]=i.useState([]),[x,N]=i.useState(),[f,w]=i.useState((s==null?void 0:s.image_url)||null);function E(t){h(t.target.value)}const{register:F,setValue:y,handleSubmit:D,formState:{errors:r}}=P({resolver:V(Q),defaultValues:{title:(s==null?void 0:s.title)||"",section:(s==null?void 0:s.section)||""}}),I=t=>{var d;const n=(d=t.target.files)==null?void 0:d[0];n&&(N(n),w(URL.createObjectURL(n)))},A=t=>{m(!0);const n=new FormData;n.append("title",t.title||""),n.append("section",t.section),n.append("content",p||""),x instanceof File&&n.append("image",x),c&&(s!=null&&s.id)?(n.append("_method","PUT"),S.post(`/dashboard/web-contents/${s.id}`,n,{forceFormData:!0,onFinish:()=>{m(!1)}})):S.post("/dashboard/web-contents",n,{forceFormData:!0,onFinish:()=>{m(!1)}})};i.useEffect(()=>{s!=null&&s.content&&h(s.content)},[s]),i.useEffect(()=>{l&&v(l)},[l]);const L=C.map(t=>t.section),T=X.filter(t=>!L.includes(t));return e.jsxs(K,{breadcrumbs:M,children:[e.jsx(W,{title:`Admin Dashboard - ${c?"Edit":"Create"} Web Content`}),e.jsxs(R,{children:[e.jsxs("h1",{className:"text-2xl font-semibold",children:[c?"Edit":"Create"," Web Content"]}),e.jsx(O,{children:e.jsx(_,{children:e.jsxs("form",{onSubmit:D(A),encType:"multipart/form-data",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{children:"Title"}),e.jsx(g,{type:"text",...F("title"),className:"form-control mt-2"}),(r.title||o)&&e.jsx("p",{className:"text-red-500",children:((j=r.title)==null?void 0:j.message)??o.title})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Content"}),e.jsx(H,{value:p,onChange:E})]}),!(s!=null&&s.section)&&e.jsxs("div",{children:[e.jsx("label",{children:"Section"}),e.jsxs($,{onValueChange:t=>y("section",t),name:"section",children:[e.jsx(z,{className:"mt-2",children:e.jsx(k,{placeholder:"Select a section"})}),e.jsx(q,{children:T.map((t,n)=>e.jsx(G,{value:t,children:`${t} section`},n))})]}),(r.section||o)&&e.jsx("p",{className:"text-red-500",children:((b=r.section)==null?void 0:b.message)??o.section})]}),f&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h6",{children:"Preview:"}),e.jsx("img",{src:f,alt:"Preview",className:"h-32 w-32 object-cover"})]}),e.jsxs("div",{children:[e.jsx("label",{children:"File"}),e.jsx(g,{type:"file",onChange:I,className:"form-control mt-2",accept:"image/*"}),o&&e.jsx("p",{className:"text-red-500",children:o.image})]}),e.jsx(B,{disabled:u,type:"submit",children:u?e.jsx(J,{size:10,color:"#59b4c7"}):"submit"})]})})})]})]})}export{ae as default,Q as webContentScheme};
